<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Santa Cruz Pizza Delivery Game</title>
  <!-- Leaflet CSS (OpenStreetMap) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- Game CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Intro screen with logo and music -->
  <div id="intro">
    <img id="logo" src="images/logo.png" alt="Joby Pizza Delivery Services logo" />
    <!-- Start button pulses to attract attention -->
    <button id="start-btn" class="pulse">Start Game</button>
    <!-- Looping music for the intro screen. Autoplay ensures the theme starts immediately on page load. -->
    <audio id="intro-audio" src="audio/intro.mp3" autoplay loop></audio>
  </div>

  <!-- Map container -->
  <div id="map" style="display:none;"></div>

  <!-- Heads-up display for score and time -->
  <div id="hud" style="display:none;">Deliveries: 0/10 | Time: 60</div>

  <!-- Phone icon for incoming orders -->
  <div id="phone-icon" style="display:none; position:absolute; top:60px; right:10px; font-size:40px; cursor:pointer; z-index:1000;">ðŸ“ž</div>

  <!-- Final game-over screen (hidden by default) -->
  <div id="game-over">
    <div id="game-over-content"></div>
  </div>

  <!-- Leaflet JS library -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="leaflet.edgebuffer.js"></script>

  <!-- Simple script to handle the start button and audio -->
  <script>
    // Once the DOM is loaded, attach the start handler
    document.addEventListener('DOMContentLoaded', () => {
      const startBtn = document.getElementById('start-btn');
      const introMusic = document.getElementById('intro-audio');
      // In case autoplay is blocked, attempt to play when user interacts
      introMusic.play().catch(() => {/* ignored */});
      startBtn.addEventListener('click', () => {
        // Stop the intro music when the game starts
        introMusic.pause();
        // Hide intro screen and reveal game UI
        document.getElementById('intro').style.display = 'none';
        document.getElementById('map').style.display = 'block';
        document.getElementById('hud').style.display = 'block';
        // Lazy-load the game script to keep initial page lightweight
        const script = document.createElement('script');
        script.src = 'game.js';
        document.body.appendChild(script);
      });
    });
  </script>
</body>
</html>
